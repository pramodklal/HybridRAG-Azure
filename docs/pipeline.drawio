<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36" version="29.4.0">
  <diagram name="Hybrid RAG Pipeline" id="hybrid-rag-pipeline">
    <mxGraphModel dx="1048" dy="601" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="2" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=24;fontStyle=1;fontColor=#1A1A1A;" value="Hybrid RAG Pipeline Architecture" vertex="1">
          <mxGeometry height="40" width="500" x="450" y="20" as="geometry" />
        </mxCell>
        <mxCell id="3" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1565C0;fontSize=16;fontStyle=1;fontColor=#1565C0;" value="INDEXING PHASE" vertex="1">
          <mxGeometry height="35" width="1320" x="40" y="80" as="geometry" />
        </mxCell>
        <mxCell id="4" parent="1" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;fillColor=#ffcccc;strokeColor=#b85450;fontSize=12;" value="PDF Documents&lt;br&gt;(850+ files)&lt;br&gt;Policies, Manuals, FAQs" vertex="1">
          <mxGeometry height="90" width="120" x="60" y="150" as="geometry" />
        </mxCell>
        <mxCell id="5" parent="1" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;fillColor=#fff4cc;strokeColor=#d6b656;fontSize=12;" value="CSV Data&lt;br&gt;(50K+ records)&lt;br&gt;Orders, Customers,&lt;br&gt;Products, Inventory" vertex="1">
          <mxGeometry height="100" width="120" x="60" y="280" as="geometry" />
        </mxCell>
        <mxCell id="6" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;align=left;spacingLeft=10;" value="Document Loader&lt;br&gt;&amp;amp; Text Splitter&lt;br&gt;&lt;br&gt;â€¢ Load PDFs&lt;br&gt;â€¢ Extract text&lt;br&gt;â€¢ Chunk into sections&lt;br&gt;â€¢ 500-1000 chars/chunk" vertex="1">
          <mxGeometry height="100" width="180" x="240" y="145" as="geometry" />
        </mxCell>
        <mxCell id="7" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;align=left;spacingLeft=10;" value="CSV Parser&lt;br&gt;&amp;amp; Transformer&lt;br&gt;&lt;br&gt;â€¢ Parse CSV files&lt;br&gt;â€¢ Validate data&lt;br&gt;â€¢ Transform to JSON&lt;br&gt;â€¢ Map to schema" vertex="1">
          <mxGeometry height="110" width="180" x="240" y="275" as="geometry" />
        </mxCell>
        <mxCell id="8" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;" value="Text&lt;br&gt;Chunk" vertex="1">
          <mxGeometry height="40" width="70" x="480" y="140" as="geometry" />
        </mxCell>
        <mxCell id="9" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;" value="Text&lt;br&gt;Chunk" vertex="1">
          <mxGeometry height="40" width="70" x="480" y="190" as="geometry" />
        </mxCell>
        <mxCell id="10" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=10;" value="Text&lt;br&gt;Chunk" vertex="1">
          <mxGeometry height="40" width="70" x="480" y="240" as="geometry" />
        </mxCell>
        <mxCell id="11" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9e6;strokeColor=#d6b656;fontSize=10;" value="JSON&lt;br&gt;Record" vertex="1">
          <mxGeometry height="40" width="70" x="480" y="295" as="geometry" />
        </mxCell>
        <mxCell id="12" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9e6;strokeColor=#d6b656;fontSize=10;" value="JSON&lt;br&gt;Record" vertex="1">
          <mxGeometry height="40" width="70" x="480" y="345" as="geometry" />
        </mxCell>
        <mxCell id="13" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;fontStyle=1;" value="Azure OpenAI&lt;br&gt;Embedding Model&lt;br&gt;&lt;br&gt;text-embedding-3-large&lt;br&gt;&lt;br&gt;â€¢ 3072 dimensions&lt;br&gt;â€¢ Cosine similarity&lt;br&gt;â€¢ 150K TPM quota" vertex="1">
          <mxGeometry height="110" width="180" x="620" y="155" as="geometry" />
        </mxCell>
        <mxCell id="14" parent="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;fontSize=10;fontStyle=2;fontColor=#666666;" value="3072D Vectors" vertex="1">
          <mxGeometry height="20" width="80" x="840" y="180" as="geometry" />
        </mxCell>
        <mxCell id="15" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5ff;strokeColor=#0288d1;fontSize=9;" value="[0.23, -0.45, ...]" vertex="1">
          <mxGeometry height="25" width="90" x="850" y="145" as="geometry" />
        </mxCell>
        <mxCell id="16" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5ff;strokeColor=#0288d1;fontSize=9;" value="[0.12, 0.89, ...]" vertex="1">
          <mxGeometry height="25" width="90" x="850" y="175" as="geometry" />
        </mxCell>
        <mxCell id="17" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5ff;strokeColor=#0288d1;fontSize=9;" value="[-0.67, 0.34, ...]" vertex="1">
          <mxGeometry height="25" width="90" x="850" y="205" as="geometry" />
        </mxCell>
        <mxCell id="18" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5ff;strokeColor=#0288d1;fontSize=9;" value="[0.45, -0.12, ...]" vertex="1">
          <mxGeometry height="25" width="90" x="850" y="235" as="geometry" />
        </mxCell>
        <mxCell id="19" parent="1" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;fillColor=#b0e0e6;strokeColor=#0277bd;fontSize=14;fontStyle=1;" value="Azure AI Search&lt;br&gt;(6 Indexes)" vertex="1">
          <mxGeometry height="260" width="140" x="1040" y="130" as="geometry" />
        </mxCell>
        <mxCell id="20" parent="1" style="text;html=1;align=left;fontSize=10;" value="ðŸ“„ documents-index (Vector)" vertex="1">
          <mxGeometry height="20" width="160" x="1055" y="180" as="geometry" />
        </mxCell>
        <mxCell id="21" parent="1" style="text;html=1;align=left;fontSize=10;" value="ðŸ›ï¸ products-index" vertex="1">
          <mxGeometry height="20" width="160" x="1055" y="205" as="geometry" />
        </mxCell>
        <mxCell id="22" parent="1" style="text;html=1;align=left;fontSize=10;" value="ðŸ“¦ orders-index" vertex="1">
          <mxGeometry height="20" width="160" x="1055" y="230" as="geometry" />
        </mxCell>
        <mxCell id="23" parent="1" style="text;html=1;align=left;fontSize=10;" value="ðŸ‘¤ customers-index" vertex="1">
          <mxGeometry height="20" width="160" x="1055" y="250" as="geometry" />
        </mxCell>
        <mxCell id="24" parent="1" style="text;html=1;align=left;fontSize=10;" value="ðŸ“Š inventory-index" vertex="1">
          <mxGeometry height="20" width="160" x="1055" y="331" as="geometry" />
        </mxCell>
        <mxCell id="25" parent="1" style="text;html=1;align=left;fontSize=10;" value="â†©ï¸ returns-index" vertex="1">
          <mxGeometry height="20" width="160" x="1060" y="305" as="geometry" />
        </mxCell>
        <mxCell id="26" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontSize=16;fontStyle=1;fontColor=#E65100;" value="QUERY PHASE (Runtime)" vertex="1">
          <mxGeometry height="35" width="1320" x="40" y="460" as="geometry" />
        </mxCell>
        <mxCell id="27" parent="1" style="shape=mxgraph.basic.smiley;fillColor=#d5e8d4;strokeColor=#82b366;" value="" vertex="1">
          <mxGeometry height="70" width="70" x="85" y="530" as="geometry" />
        </mxCell>
        <mxCell id="28" parent="1" style="text;html=1;align=center;fontSize=12;fontStyle=1;" value="User" vertex="1">
          <mxGeometry height="20" width="80" x="80" y="610" as="geometry" />
        </mxCell>
        <mxCell id="29" parent="1" style="ellipse;whiteSpace=wrap;html=1;fillColor=#fff4cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;" value="User Query" vertex="1">
          <mxGeometry height="80" width="120" x="230" y="545" as="geometry" />
        </mxCell>
        <mxCell id="30" parent="1" style="text;html=1;align=left;fontSize=9;fontColor=#666666;" value="Examples:&lt;br&gt;â€¢ &quot;Show orders for C123&quot;&lt;br&gt;â€¢ &quot;Return policy?&quot;&lt;br&gt;â€¢ &quot;Find headphones &amp;lt; $100&quot;" vertex="1">
          <mxGeometry height="55" width="140" x="220" y="635" as="geometry" />
        </mxCell>
        <mxCell id="31" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=11;align=left;spacingLeft=10;fontStyle=1;" value="Query Analysis&lt;br&gt;&amp;amp; Strategy Detection&lt;br&gt;&lt;br&gt;â€¢ Extract keywords&lt;br&gt;â€¢ Detect IDs/filters&lt;br&gt;â€¢ Classify intent&lt;br&gt;â€¢ Route to strategy" vertex="1">
          <mxGeometry height="110" width="160" x="420" y="530" as="geometry" />
        </mxCell>
        <mxCell id="32" parent="1" style="rhombus;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1;" value="Which&lt;br&gt;Strategy?" vertex="1">
          <mxGeometry height="100" width="100" x="640" y="540" as="geometry" />
        </mxCell>
        <mxCell id="33" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5ff;strokeColor=#0288d1;fontSize=12;fontStyle=1;" value="VECTOR SEARCH&lt;br&gt;(Semantic)" vertex="1">
          <mxGeometry height="40" width="140" x="800" y="480" as="geometry" />
        </mxCell>
        <mxCell id="34" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f8ff;strokeColor=#0288d1;fontSize=9;align=left;spacingLeft=5;" value="1. Generate query embedding&lt;br&gt;2. Vector similarity search&lt;br&gt;3. Find top-k matches&lt;br&gt;4. Retrieve content" vertex="1">
          <mxGeometry height="70" width="140" x="800" y="525" as="geometry" />
        </mxCell>
        <mxCell id="35" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d4edda;strokeColor=#28a745;fontSize=12;fontStyle=1;" value="FILTER SEARCH&lt;br&gt;(Exact Match)" vertex="1">
          <mxGeometry height="40" width="140" x="800" y="615" as="geometry" />
        </mxCell>
        <mxCell id="36" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff0;strokeColor=#28a745;fontSize=9;align=left;spacingLeft=5;" value="1. Extract ID/filter value&lt;br&gt;2. Build OData filter&lt;br&gt;3. Exact match query&lt;br&gt;4. Return results" vertex="1">
          <mxGeometry height="70" width="140" x="800" y="660" as="geometry" />
        </mxCell>
        <mxCell id="37" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3cd;strokeColor=#ffc107;fontSize=12;fontStyle=1;" value="FULL-TEXT SEARCH&lt;br&gt;(Keyword + Facets)" vertex="1">
          <mxGeometry height="40" width="140" x="800" y="750" as="geometry" />
        </mxCell>
        <mxCell id="38" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fffaec;strokeColor=#ffc107;fontSize=9;align=left;spacingLeft=5;" value="1. Tokenize query&lt;br&gt;2. Keyword search&lt;br&gt;3. Apply facets/filters&lt;br&gt;4. BM25 ranking" vertex="1">
          <mxGeometry height="70" width="140" x="800" y="795" as="geometry" />
        </mxCell>
        <mxCell id="39" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e9;strokeColor=#4caf50;fontSize=12;fontStyle=1;" value="Retrieved Context&lt;br&gt;(Top-k Results)" vertex="1">
          <mxGeometry height="60" width="140" x="1150" y="615" as="geometry" />
        </mxCell>
        <mxCell id="40" parent="1" style="text;html=1;align=left;fontSize=9;fontColor=#666666;" value="â€¢ Document chunks&lt;br&gt;â€¢ Order records&lt;br&gt;â€¢ Product details&lt;br&gt;â€¢ Relevance scores" vertex="1">
          <mxGeometry height="55" width="120" x="1150" y="680" as="geometry" />
        </mxCell>
        <mxCell id="41" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e0f7fa;strokeColor=#00acc1;fontSize=10;align=left;spacingLeft=10;fontStyle=1;" value="Azure OpenAI GPT-4o&lt;br&gt;&lt;br&gt;Prompt Building:&lt;br&gt;System: You are an assistant...&lt;br&gt;Context: [Retrieved data]&lt;br&gt;User: [Original query]&lt;br&gt;&lt;br&gt;Response Generation:&lt;br&gt;â€¢ Streaming: true&lt;br&gt;â€¢ Temperature: 0.7&lt;br&gt;â€¢ Max tokens: 1000" vertex="1">
          <mxGeometry height="160" width="180" x="1140" y="770" as="geometry" />
        </mxCell>
        <mxCell id="42" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#4caf50;fontSize=12;fontStyle=1;" value="Intelligent Answer&lt;br&gt;(Streaming Response)" vertex="1">
          <mxGeometry height="80" width="140" x="230" y="820" as="geometry" />
        </mxCell>
        <mxCell id="43" parent="1" style="text;html=1;align=left;fontSize=9;fontColor=#666666;" value="âœ“ Natural language&lt;br&gt;âœ“ Context-based&lt;br&gt;âœ“ Real-time streaming&lt;br&gt;âœ“ Source-referenced" vertex="1">
          <mxGeometry height="55" width="120" x="240" y="905" as="geometry" />
        </mxCell>
        <mxCell id="44" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ff9800;fontSize=11;fontStyle=1;align=left;spacingLeft=10;" value="âš¡ Performance Metrics" vertex="1">
          <mxGeometry height="30" width="120" x="1240" y="80" as="geometry" />
        </mxCell>
        <mxCell id="45" parent="1" style="text;html=1;align=left;fontSize=9;fontColor=#666666;" value="â€¢ Indexing: 850 PDFs in 45min&lt;br&gt;â€¢ Search: ~250ms latency&lt;br&gt;â€¢ Embedding: ~350ms&lt;br&gt;â€¢ LLM: ~1200ms&lt;br&gt;â€¢ Total: 1.8s end-to-end&lt;br&gt;â€¢ Accuracy: 99%+&lt;br&gt;â€¢ Cost: $0.027/query" vertex="1">
          <mxGeometry height="100" width="135" x="1240" y="115" as="geometry" />
        </mxCell>
        <mxCell id="46" parent="1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=11;fontStyle=1;align=center;" value="Legend" vertex="1">
          <mxGeometry height="30" width="140" x="40" y="800" as="geometry" />
        </mxCell>
        <mxCell id="47" parent="1" style="text;html=1;align=left;fontSize=9;fontColor=#666666;" value="â”â” Data Flow" vertex="1">
          <mxGeometry height="15" width="80" x="50" y="835" as="geometry" />
        </mxCell>
        <mxCell id="48" parent="1" style="text;html=1;align=left;fontSize=9;fontColor=#666666;" value="â”„â”„ Query Flow" vertex="1">
          <mxGeometry height="15" width="80" x="50" y="855" as="geometry" />
        </mxCell>
        <mxCell id="49" edge="1" parent="1" source="4" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;" target="6" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="50" edge="1" parent="1" source="5" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#666666;" target="7" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="51" edge="1" parent="1" source="6" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#82b366;" target="9" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="52" edge="1" parent="1" source="7" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#d79b00;" target="11" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="53" edge="1" parent="1" source="9" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6c8ebf;" target="13" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="54" edge="1" parent="1" source="13" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#0288d1;" target="19" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="55" edge="1" parent="1" source="11" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#d79b00;dashed=1;" target="19" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="56" edge="1" parent="1" source="27" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#d6b656;" target="29" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="57" edge="1" parent="1" source="29" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#d6b656;" target="31" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="58" edge="1" parent="1" source="31" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#d79b00;" target="32" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="59" edge="1" parent="1" source="32" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#0288d1;" target="33" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="60" edge="1" parent="1" source="32" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#28a745;" target="35" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="61" edge="1" parent="1" source="32" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#ffc107;" target="37" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="62" edge="1" parent="1" source="34" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#4caf50;" target="39" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="63" edge="1" parent="1" source="36" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#4caf50;" target="39" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="64" edge="1" parent="1" source="38" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#4caf50;" target="39" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="65" edge="1" parent="1" source="39" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#00acc1;" target="41" value="">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="66" edge="1" parent="1" source="41" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#4caf50;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" target="42" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1100" y="850" />
              <mxPoint x="1100" y="960" />
              <mxPoint x="400" y="960" />
              <mxPoint x="400" y="860" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="67" edge="1" parent="1" source="42" style="endArrow=classic;html=1;strokeWidth=3;strokeColor=#4caf50;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" target="27" value="">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="190" y="860" />
              <mxPoint x="190" y="565" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="deaeT9rlzd3b_Eye9pvj-69" parent="1" style="text;html=1;whiteSpace=wrap;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;rounded=0;" value="&lt;font style=&quot;color: rgb(0, 127, 255);&quot;&gt;&lt;b style=&quot;&quot;&gt;@pramodklal&lt;/b&gt;&lt;/font&gt;" vertex="1">
          <mxGeometry height="30" width="145" x="1215" y="960" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
